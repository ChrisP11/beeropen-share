{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container my-4 archive-copy">

<!-- Hero -->
<header class="text-center mb-4">
<h1 class="mb-1">Beer Open {{ year }}</h1>
<p class="text-muted mb-0">
    {{ location }}{% if date %} â€” {{ date|date:"j F Y" }}{% endif %}
</p>
</header>

  {# --- Plaque image (centered) --- #}
  {% if plaque_url %}
    <img src="{{ plaque_url }}" alt="Trophy plaque"
         class="img-fluid rounded d-block mx-auto mb-3 archive-hero-img">
  {% elif plaque %}
    <img src="{% static plaque %}" alt="Trophy plaque"
         class="img-fluid rounded d-block mx-auto mb-3 archive-hero-img">
  {% endif %}

  {# --- Logo image (centered) --- #}
  {% if logo_url %}
    <img src="{{ logo_url }}" alt="Event logo"
         class="img-fluid rounded d-block mx-auto mb-4 archive-logo-img">
  {% elif logo %}
    <img src="{% static logo %}" alt="Event logo"
         class="img-fluid rounded d-block mx-auto mb-4 archive-logo-img">
  {% endif %}

  {# --- Write-up --- #}
  {% if writeup_html %}
    <h3>Write-up</h3>
    <div class="mb-4">{{ writeup_html|safe }}</div>
  {% endif %}

  {# --- Odds --- #}
  {% if odds_html %}
    <h3>The Odds</h3>
    <div class="mb-4">{{ odds_html|safe }}</div>
  {% endif %}

  {# --- Gallery (supports either pre-built gallery_imgs or queryset gallery) --- #}
  {% if gallery_imgs or gallery %}
    <h3>Gallery</h3>
    <div class="row g-3">
      {% if gallery_imgs %}
        {% for g in gallery_imgs %}
          <div class="col-6 col-md-4 col-lg-3">
            <img src="{{ g.url }}" class="img-fluid rounded" alt="{{ g.caption }}">
            {% if g.caption %}<div class="small text-muted mt-1">{{ g.caption }}</div>{% endif %}
          </div>
        {% endfor %}
      {% else %}
        {% for img in gallery %}
          <div class="col-6 col-md-4 col-lg-3">
            {# If image is a static path (CharField) #}
            {% if img.image %}
              <img src="{% static img.image %}" class="img-fluid rounded" alt="{{ img.caption }}">
            {% endif %}
            {% if img.caption %}<div class="small text-muted mt-1">{{ img.caption }}</div>{% endif %}
          </div>
        {% endfor %}
      {% endif %}
    </div>
  {% endif %}
</div>
{% endblock %}
